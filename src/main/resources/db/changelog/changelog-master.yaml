databaseChangeLog:
        - changeSet:
                  id: 1
                  author: appifylab
                  changes:
                          # Users table
                          - createTable:
                                    tableName: users
                                    columns:
                                            - column:
                                                      name: id
                                                      type: bigint
                                                      autoIncrement: true
                                                      constraints:
                                                              primaryKey: true
                                                              nullable: false
                                            - column:
                                                      name: first_name
                                                      type: varchar(50)
                                                      constraints:
                                                              nullable: false
                                            - column:
                                                      name: last_name
                                                      type: varchar(50)
                                                      constraints:
                                                              nullable: false
                                            - column:
                                                      name: email
                                                      type: varchar(100)
                                                      constraints:
                                                              nullable: false
                                                              unique: true
                                            - column:
                                                      name: password_hash
                                                      type: varchar(255)
                                                      constraints:
                                                              nullable: false
                                            - column:
                                                      name: is_active
                                                      type: boolean
                                                      defaultValueBoolean: true
                                            - column:
                                                      name: created_at
                                                      type: timestamp
                                                      defaultValueComputed: CURRENT_TIMESTAMP
                                            - column:
                                                      name: updated_at
                                                      type: timestamp
                                                      defaultValueComputed: CURRENT_TIMESTAMP

                          # Refresh tokens table
                          - createTable:
                                    tableName: refresh_tokens
                                    columns:
                                            - column:
                                                      name: id
                                                      type: bigint
                                                      autoIncrement: true
                                                      constraints:
                                                              primaryKey: true
                                                              nullable: false
                                            - column:
                                                      name: user_id
                                                      type: bigint
                                                      constraints:
                                                              nullable: false
                                                              foreignKeyName: fk_refresh_token_user
                                                              references: users(id)
                                                              deleteCascade: true
                                            - column:
                                                      name: token
                                                      type: varchar(500)
                                                      constraints:
                                                              nullable: false
                                                              unique: true
                                            - column:
                                                      name: expiry_date
                                                      type: timestamp
                                                      constraints:
                                                              nullable: false
                                            - column:
                                                      name: created_at
                                                      type: timestamp
                                                      defaultValueComputed: CURRENT_TIMESTAMP

                          # Posts table
                          - createTable:
                                    tableName: posts
                                    columns:
                                            - column:
                                                      name: id
                                                      type: bigint
                                                      autoIncrement: true
                                                      constraints:
                                                              primaryKey: true
                                                              nullable: false
                                            - column:
                                                      name: user_id
                                                      type: bigint
                                                      constraints:
                                                              nullable: false
                                                              foreignKeyName: fk_post_user
                                                              references: users(id)
                                                              deleteCascade: true
                                            - column:
                                                      name: content
                                                      type: text
                                                      constraints:
                                                              nullable: false
                                            - column:
                                                      name: image_url
                                                      type: varchar(500)
                                            - column:
                                                      name: is_public
                                                      type: boolean
                                                      defaultValueBoolean: true
                                            - column:
                                                      name: created_at
                                                      type: timestamp
                                                      defaultValueComputed: CURRENT_TIMESTAMP
                                            - column:
                                                      name: updated_at
                                                      type: timestamp
                                                      defaultValueComputed: CURRENT_TIMESTAMP

                          # Post likes table
                          - createTable:
                                    tableName: post_likes
                                    columns:
                                            - column:
                                                      name: id
                                                      type: bigint
                                                      autoIncrement: true
                                                      constraints:
                                                              primaryKey: true
                                                              nullable: false
                                            - column:
                                                      name: post_id
                                                      type: bigint
                                                      constraints:
                                                              nullable: false
                                                              foreignKeyName: fk_post_like_post
                                                              references: posts(id)
                                                              deleteCascade: true
                                            - column:
                                                      name: user_id
                                                      type: bigint
                                                      constraints:
                                                              nullable: false
                                                              foreignKeyName: fk_post_like_user
                                                              references: users(id)
                                                              deleteCascade: true
                                            - column:
                                                      name: created_at
                                                      type: timestamp
                                                      defaultValueComputed: CURRENT_TIMESTAMP

                          # Comments table
                          - createTable:
                                    tableName: comments
                                    columns:
                                            - column:
                                                      name: id
                                                      type: bigint
                                                      autoIncrement: true
                                                      constraints:
                                                              primaryKey: true
                                                              nullable: false
                                            - column:
                                                      name: post_id
                                                      type: bigint
                                                      constraints:
                                                              nullable: false
                                                              foreignKeyName: fk_comment_post
                                                              references: posts(id)
                                                              deleteCascade: true
                                            - column:
                                                      name: user_id
                                                      type: bigint
                                                      constraints:
                                                              nullable: false
                                                              foreignKeyName: fk_comment_user
                                                              references: users(id)
                                                              deleteCascade: true
                                            - column:
                                                      name: parent_comment_id
                                                      type: bigint
                                                      constraints:
                                                              foreignKeyName: fk_comment_parent
                                                              references: comments(id)
                                                              deleteCascade: true
                                            - column:
                                                      name: content
                                                      type: text
                                                      constraints:
                                                              nullable: false
                                            - column:
                                                      name: created_at
                                                      type: timestamp
                                                      defaultValueComputed: CURRENT_TIMESTAMP
                                            - column:
                                                      name: updated_at
                                                      type: timestamp
                                                      defaultValueComputed: CURRENT_TIMESTAMP

                          # Comment likes table
                          - createTable:
                                    tableName: comment_likes
                                    columns:
                                            - column:
                                                      name: id
                                                      type: bigint
                                                      autoIncrement: true
                                                      constraints:
                                                              primaryKey: true
                                                              nullable: false
                                            - column:
                                                      name: comment_id
                                                      type: bigint
                                                      constraints:
                                                              nullable: false
                                                              foreignKeyName: fk_comment_like_comment
                                                              references: comments(id)
                                                              deleteCascade: true
                                            - column:
                                                      name: user_id
                                                      type: bigint
                                                      constraints:
                                                              nullable: false
                                                              foreignKeyName: fk_comment_like_user
                                                              references: users(id)
                                                              deleteCascade: true
                                            - column:
                                                      name: created_at
                                                      type: timestamp
                                                      defaultValueComputed: CURRENT_TIMESTAMP

                          # Indexes for performance
                          - createIndex:
                                    indexName: idx_user_email
                                    tableName: users
                                    columns:
                                            - column:
                                                      name: email

                          - createIndex:
                                    indexName: idx_post_user_id
                                    tableName: posts
                                    columns:
                                            - column:
                                                      name: user_id

                          - createIndex:
                                    indexName: idx_post_created_at
                                    tableName: posts
                                    columns:
                                            - column:
                                                      name: created_at
                                                      descending: true

                          - createIndex:
                                    indexName: idx_post_is_public
                                    tableName: posts
                                    columns:
                                            - column:
                                                      name: is_public

                          - createIndex:
                                    indexName: idx_post_likes_post_user
                                    tableName: post_likes
                                    columns:
                                            - column:
                                                      name: post_id
                                            - column:
                                                      name: user_id
                                    unique: true

                          - createIndex:
                                    indexName: idx_comment_post_id
                                    tableName: comments
                                    columns:
                                            - column:
                                                      name: post_id

                          - createIndex:
                                    indexName: idx_comment_parent_id
                                    tableName: comments
                                    columns:
                                            - column:
                                                      name: parent_comment_id

                          - createIndex:
                                    indexName: idx_comment_likes_comment_user
                                    tableName: comment_likes
                                    columns:
                                            - column:
                                                      name: comment_id
                                            - column:
                                                      name: user_id
                                    unique: true

                          - createIndex:
                                    indexName: idx_refresh_token_user
                                    tableName: refresh_tokens
                                    columns:
                                            - column:
                                                      name: user_id

                          - createIndex:
                                    indexName: idx_refresh_token_expiry
                                    tableName: refresh_tokens
                                    columns:
                                            - column:
                                                      name: expiry_date